function scrollY(box){	//Y轴滚动
	var scrollY,pointX,pointY,top=0,moveX,moveY;
	var move=false;
	var box=$(box);
	var H=box.height();
	var W=box.width();
	var cententH=box.children().height();
	var btnH=H/cententH*H;
	var scrollY='<div class="scrollboxs" style="width:18px;position:absolute;top:0px;right:0px;z-index:0;background-color:#444448;height:'+H+'px;">';
		scrollY+='<div id="scrollbtn" style="width:100%;height:'+btnH+'px;margin:0 auto;position:relative;cursor:pointer" tops="0">';
		scrollY+='<div style="background-color:#696979;position:absolute;width:6px;left:6px;height:100%;border-radius:4px"></div>';
		scrollY+='</div></div>';
	box.parent().css({"position":"relative"});
	if(H/cententH<1){
		$(".scrollboxs").remove();
		box.before(scrollY);
	}else{
		$(".scrollboxs").remove();
	}
	$("#scrollbtn").hover(function(){
		$(this).children().css({
			"background-color":"#9797ac",
		});
	},function(){
		$(this).children().css({
			"background-color":"#696979",
		});
	});
	function addscroll(){
		box.scroll(function(){
			scrollY=$(this).scrollTop();
			$("#scrollbtn").css({
				"margin-top":scrollY/cententH*H
			});
			top=scrollY/cententH*H;
			$("#scrollbtn").attr("tops",top);
		});
	}
	addscroll();
	$("#scrollbtn").mousedown(function(e){
		pointX = e.pageX;
		//这里可以得到鼠标Y坐标
		pointY = e.pageY;
		move=true;
		top=$("#scrollbtn").attr("tops")*1;
		$(this).focus();
	});
	$(document).mousemove(function(e){
		e.stopPropagation();
		if(move==true){
			box.unbind();
			moveX =e.pageX-pointX;
			//这里可以得到鼠标Y坐标
			moveY =e.pageY-pointY;
			$("#scrollbtn").css({
				"margin-top":top+moveY
			});
			$("#scrollbtn").attr("tops",top+moveY);
			box.scrollTop((top+moveY)/H*cententH);
			if(top+moveY>H-btnH){
				$("#scrollbtn").css({
					"margin-top":H-btnH
				});
				$("#scrollbtn").attr("tops",H-btnH);
			}else if(top+moveY<0){
				$("#scrollbtn").css({
					"margin-top":0
				});
				$("#scrollbtn").attr("tops",0);
			}
		}
	});
	$(document).mouseup(function(e){
		move=false;
		addscroll();
	});
}
function scrollsY(box){
	var pointY=0,top=0;
	var indexObj;
	$(box).each(function(){
		var box=$(this);
		var H=box.height();
		var cententH=box.children().height();
		var btnH=H/cententH*H;
		var scrollY='<div class="scroll_box" boxH="'+H+'" cententH="'+cententH+'" move="false">';
			scrollY+='<div class="scrollY_btn" tops="0">';
			scrollY+='<div style="background-color:#696979;position:absolute;width:6px;left:6px;height:100%;border-radius:4px"></div>';
			scrollY+='</div></div>';
		box.parent().css({"position":"relative"});
		if(H/cententH<1){
			box.children(".scroll_box").remove();
			box.before(scrollY);
		}else{
			box.children(".scroll_box").remove();
		}
		box.siblings(".scroll_box").css({
			"width":"18px",
			"position":"absolute",
			"top":0,
			"right":0,
			"z-index":0,
			"background-color":"#444448",
			"height":H
		});
		box.siblings(".scroll_box").children(".scrollY_btn").css({
			"width":"100%",
			"position":"relative",
			"cursor":"pointer",
			"height":btnH
		});
		$(".scrollY_btn").hover(function(){
			$(this).children().css({
				"background-color":"#9797ac",
			});
		},function(){
			$(this).children().css({
				"background-color":"#696979",
			});
		});
		addscroll(box);
		$(".scrollY_btn").mousedown(function(e){
			indexObj=$(this);
			pointY = e.pageY;	//这里可以得到鼠标Y坐标
			top=$(this).attr("tops")*1;
			$(this).parent().attr("move","true");
			$(this).focus();
		});
		$(document).mousemove(function(e){
			e.stopPropagation();
			if(indexObj!=undefined){
				if(indexObj.parent().attr("move")=="true"){
					var moveY =e.pageY-pointY;
					var boxH=indexObj.parent().attr("boxH")
					var cententH=indexObj.parent().attr("cententH");
					var btnH=boxH/cententH*boxH;
					indexObj.siblings().unbind();
					indexObj.css({
						"margin-top":top+moveY
					});
					indexObj.attr("tops",top+moveY);
					indexObj.parent().siblings().scrollTop((top+moveY)/boxH*cententH);
					if(top+moveY>boxH-btnH){
						indexObj.css({
							"margin-top":boxH-btnH
						});
						indexObj.attr("tops",boxH-btnH);
					}else if(top+moveY<0){
						indexObj.css({
							"margin-top":0
						});
						indexObj.attr("tops",0);
					}
				}
			}
		});
		$(document).mouseup(function(e){
			if(indexObj!=undefined){
				indexObj.parent().attr("move","false")
				addscroll(box);
			}
		});
	});
	
	function addscroll(box){
		box.scroll(function(){
			var Y=$(this).scrollTop();
			var boxH=$(this).siblings(".scroll_box").attr("boxH")
			var cententH=$(this).siblings(".scroll_box").attr("cententH");
			$(this).siblings(".scroll_box").children(".scrollY_btn").css({
				"margin-top":Y/cententH*boxH
			});
			$(this).siblings(".scroll_box").children(".scrollY_btn").attr("tops",Y/cententH*boxH);
		});
	}
}
function scrollsX(box){
	var pointX=0,left=0;
	var indexObj;
	$(box).each(function(){
		var box=$(this);
		var W=box.width();
		var cententW=box.children().width();
		var btnW=W/cententW*W;
		var scrollX='<div class="scrollX_box" boxW="'+W+'" cententW="'+cententW+'" move="false">';
			scrollX+='<div class="scrollX_btns" lefts="0">';
			scrollX+='<div style="background-color:#696979;position:absolute;width:100%;top:6px;height:6px;border-radius:4px"></div>';
			scrollX+='</div></div>';
		box.parent().css({"position":"relative"});
		if(W/cententW<1){
			box.children(".scrollX_box").remove();
			box.before(scrollX);
		}else{
			box.children(".scrollX_box").remove();
		}
		box.siblings(".scrollX_box").css({
			"width":W,
			"position":"absolute",
			"bottom":0,
			"left":0,
			"z-index":0,
			"background-color":"#444448",
			"height":"18px"
		});
		box.siblings(".scrollX_box").children(".scrollX_btns").css({
			"width":btnW,
			"position":"relative",
			"cursor":"pointer",
			"height":"18px"
		});
		$(".scrollX_btn").hover(function(){
			$(this).children().css({
				"background-color":"#9797ac",
			});
		},function(){
			$(this).children().css({
				"background-color":"#696979",
			});
			//move=$(this).parent().attr("move","false");
		});
		box.scroll(function(){
			var X=$(this).scrollLeft();
			var boxW=$(this).siblings(".scrollX_box").attr("boxW")
			var cententW=$(this).siblings(".scrollX_box").attr("cententW");
			$(this).siblings(".scrollX_box").children(".scrollX_btns").css({
				"margin-left":X/cententW*boxW
			});
			$(this).siblings(".scrollX_box").children(".scrollX_btns").attr("lefts",X/cententW*boxW);
		});
		$(".scrollX_btns").mousedown(function(e){
			indexObj=$(this);
			pointX = e.pageX;	//这里可以得到鼠标Y坐标
			left=$(this).attr("lefts")*1;
			$(this).parent().attr("move","true");
			$(this).focus();
		});
		$(document).mousemove(function(e){
			e.stopPropagation();
			if(indexObj!=undefined){
				if(indexObj.parent().attr("move")=="true"){
					var moveX =e.pageX-pointX;
					var boxW=indexObj.parent().attr("boxW")
					var cententW=indexObj.parent().attr("cententW");
					var btnW=boxW/cententW*boxW;
					//$(this).siblings().unbind();
					indexObj.css({
						"margin-left":left+moveX
					});
					indexObj.attr("lefts",left+moveX);
					indexObj.parent().siblings().scrollLeft((left+moveX)/boxW*cententW);
					if(left+moveX>boxW-btnW){
						indexObj.css({
							"margin-left":boxW-btnW
						});
						indexObj.attr("lefts",boxW-btnW);
					}else if(left+moveX<0){
						indexObj.css({
							"margin-left":0
						});
						indexObj.attr("lefts",0);
					}
				}
			}
		});
		$(document).mouseup(function(e){
			if(indexObj!=undefined){
				indexObj.parent().attr("move","false");
				indexObj.focus();
			}
		});
	});
}



function scrollsXY(box){		//XY轴滚动最终版
	var pointX=0,left=0;
	var indexObj;
	var indexObj2;
	$(box).each(function(){
		var box=$(this);
		var W=box.width()-18;
		var cententW=box.children().width();
		var btnW=W/cententW*W;
		var scrollX='<div class="scrollX_box" boxW="'+W+'" cententW="'+cententW+'" move="false">';
			scrollX+='<div class="scrollX_btn" lefts="0">';
			scrollX+='<div style="background-color:#696979;position:absolute;width:100%;top:6px;height:6px;border-radius:4px"></div>';
			scrollX+='</div></div>';
		box.parent().css({"position":"relative"});
		if(W/cententW<1){
			box.children(".scrollX_box").remove();
			box.before(scrollX);
		}else{
			box.children(".scrollX_box").remove();
		}
		box.siblings(".scrollX_box").css({
			"width":W,
			"position":"absolute",
			"bottom":0,
			"left":0,
			"z-index":0,
			"background-color":"#444448",
			"height":"18px"
		});
		box.siblings(".scrollX_box").children(".scrollX_btn").css({
			"width":btnW,
			"position":"relative",
			"cursor":"pointer",
			"height":"18px"
		});
		$(".scrollX_btn").hover(function(){
			$(this).children().css({
				"background-color":"#9797ac",
			});
		},function(){
			$(this).children().css({
				"background-color":"#696979",
			});
			//move=$(this).parent().attr("move","false");
		});
		box.scroll(function(){
			var X=$(this).scrollLeft();
			var boxW=$(this).siblings(".scrollX_box").attr("boxW")
			var cententW=$(this).siblings(".scrollX_box").attr("cententW");
			$(this).siblings(".scrollX_box").children(".scrollX_btn").css({
				"margin-left":X/cententW*boxW
			});
			$(this).siblings(".scrollX_box").children(".scrollX_btn").attr("lefts",X/cententW*boxW);
		});
		$(".scrollX_btn").mousedown(function(e){
			indexObj=$(this);
			pointX = e.pageX;	//这里可以得到鼠标Y坐标
			left=$(this).attr("lefts")*1;
			$(this).parent().attr("move","true");
			$(this).focus();
		});
		$(document).mousemove(function(e){
			e.stopPropagation();
			if(indexObj!=undefined){
				if(indexObj.parent().attr("move")=="true"){
					var moveX =e.pageX-pointX;
					var boxW=indexObj.parent().attr("boxW")
					var cententW=indexObj.parent().attr("cententW");
					var btnW=boxW/cententW*boxW;
					//$(this).siblings().unbind();
					indexObj.css({
						"margin-left":left+moveX
					});
					indexObj.attr("lefts",left+moveX);
					indexObj.parent().siblings().scrollLeft((left+moveX)/boxW*cententW);
					if(left+moveX>boxW-btnW){
						indexObj.css({
							"margin-left":boxW-btnW
						});
						indexObj.attr("lefts",boxW-btnW);
					}else if(left+moveX<0){
						indexObj.css({
							"margin-left":0
						});
						indexObj.attr("lefts",0);
					}
				}
			}
		});
		$(document).mouseup(function(e){
			if(indexObj!=undefined){
				indexObj.parent().attr("move","false");
				indexObj.focus();
			}
		});
	});
	var pointY=0,top=0;
	$(box).each(function(){
		var box=$(this);
		var H=box.height()-18;
		var cententH=box.children().height();
		var btnH=H/cententH*H;
		var scrollY='<div class="scroll_box" boxH="'+H+'" cententH="'+cententH+'" move="false">';
			scrollY+='<div class="scroll_btn" tops="0">';
			scrollY+='<div style="background-color:#696979;position:absolute;width:6px;left:6px;height:100%;border-radius:4px"></div>';
			scrollY+='</div></div>';
		box.parent().css({"position":"relative"});
		if(H/cententH<1){
			box.children(".scroll_box").remove();
			box.before(scrollY);
		}else{
			box.children(".scroll_box").remove();
		}
		box.siblings(".scroll_box").css({
			"width":"18px",
			"position":"absolute",
			"top":0,
			"right":0,
			"z-index":0,
			"background-color":"#444448",
			"height":H,
			"border-bottom":"solid 18px #444448"
		});
		box.siblings(".scroll_box").children(".scroll_btn").css({
			"width":"100%",
			"position":"relative",
			"cursor":"pointer",
			"height":btnH
		});
		$(".scroll_btn").hover(function(){
			$(this).children().css({
				"background-color":"#9797ac",
			});
		},function(){
			$(this).children().css({
				"background-color":"#696979",
			});
			/*move=$(this).parent().attr("move","false");
			addscroll(box);*/
		});
		addscroll(box);
		$(".scroll_btn").mousedown(function(e){
			indexObj2=$(this);
			pointY = e.pageY;	//这里可以得到鼠标Y坐标
			top=$(this).attr("tops")*1;
			$(this).parent().attr("move","true");
			$(this).focus();
		});
		$(document).mousemove(function(e){
			e.stopPropagation();
			if(indexObj2!=undefined){
				if(indexObj2.parent().attr("move")=="true"){
					var moveY =e.pageY-pointY;
					var boxH=indexObj2.parent().attr("boxH")
					var cententH=indexObj2.parent().attr("cententH");
					var btnH=boxH/cententH*boxH;
					indexObj2.siblings().unbind();
					indexObj2.css({
						"margin-top":top+moveY
					});
					indexObj2.attr("tops",top+moveY);
					indexObj2.parent().siblings().scrollTop((top+moveY)/boxH*cententH);
					if(top+moveY>boxH-btnH){
						indexObj2.css({
							"margin-top":boxH-btnH
						});
						indexObj2.attr("tops",boxH-btnH);
					}else if(top+moveY<0){
						indexObj2.css({
							"margin-top":0
						});
						indexObj2.attr("tops",0);
					}
				}
			}
		});
		$(document).mouseup(function(e){
			if(indexObj2!=undefined){
				indexObj2.parent().attr("move","false")
				addscroll(box);
			}
		});
	});
	
	function addscroll(box){
		box.scroll(function(){
			var Y=$(this).scrollTop();
			var boxH=$(this).siblings(".scroll_box").attr("boxH")
			var cententH=$(this).siblings(".scroll_box").attr("cententH");
			$(this).siblings(".scroll_box").children(".scroll_btn").css({
				"margin-top":Y/cententH*boxH
			});
			$(this).siblings(".scroll_box").children(".scroll_btn").attr("tops",Y/cententH*boxH);
		});
	}
}